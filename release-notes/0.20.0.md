# CuboMX Release 0.20.0: Auto-Loading Content with `mx-load` & Lifecycle Enhancements

This release introduces a powerful new directive, `mx-load`, for automatically fetching and rendering content when your application starts. It also includes significant improvements to component lifecycle management and stability.

---

## ‚ú® New Features

### New Directive: `mx-load`

We've added the `mx-load` directive, a simple yet powerful way to load content from a URL as soon as an element is initialized in the DOM.

This is perfect for populating widgets, loading initial data, or replacing placeholder content without any user interaction.

**How it works:**
-   Add `mx-load="/your/url"` to an element.
-   When CuboMX initializes that element, it will automatically fetch the content from the URL.
-   The response is then swapped into the DOM, just like `mx-link`.

**Example: Loading a User Profile Widget**
```html
<!-- This div will be replaced by the content from /widgets/user-profile -->
<div mx-load="/widgets/user-profile" mx-target="#profile-widget:outerHTML">
    Loading profile...
</div>
<div id="profile-widget"></div>
```

`mx-load` supports the same content swapping modifiers as `mx-link` via the `mx-target` and `mx-select` attributes, giving you full control over how the fetched content is displayed.

---

## üõ†Ô∏è Improvements & Bug Fixes

### Component Lifecycle & State Isolation

-   **Improved State Reset:** We've fixed a critical bug where state from a previous component instance could leak into a new one when using factories (`mx-data="myComp()"`). Now, when a component is removed and a new one with the same `mx-ref` is added, CuboMX guarantees a completely fresh state, including `ArrayItems`, by properly re-initializing the component.
-   **New Tests:** Added a comprehensive suite of tests to verify that component state is correctly isolated and that `init()` and `destroy()` are called as expected during component replacement.

### Framework Stability & Consistency

-   **Asynchronous `mx-link`:** The `mx-link` directive now correctly `await`s the `CuboMX.swap()` function, ensuring that SPA-style navigation behaves predictably.
-   **Consistent Initial Hydration:** The initial component scan at startup (`CuboMX.start()`) now begins from `document.documentElement`. This makes it possible to reliably use directives on the `<body>` or even `<html>` tags and aligns the startup behavior with the `MutationObserver`'s observation root.
-   **Title Update Order:** In `CuboMX.swap()`, the `document.title` is now updated *before* the DOM is mutated. This ensures that lifecycle hooks like `onDOMUpdate()` have access to the correct new page title when they are triggered.
